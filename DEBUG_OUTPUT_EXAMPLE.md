# 日志压缩调试信息示例

## 当你点击"复制日志+Prompt"或"生成今日日报"时，会看到以下调试信息：

### 示例输出 1: 复制日志

```
[11:55:30] [INFO] 📋 开始复制日志... (原始: 480 条)
[11:55:30] [INFO] ━━━ 日志压缩统计 ━━━
[11:55:30] [INFO] 原始日志: 480 条
[11:55:30] [INFO] 过滤掉静止/无效: 320 条
[11:55:30] [INFO] 有效记录: 160 条
[11:55:30] [INFO] 合并后: 65 条
[11:55:30] [INFO] 压缩率: 13.5% (节省token约 86.5%)
[11:55:30] [INFO] ━━━━━━━━━━━━━━━━━━
[11:55:30] [INFO] 已复制日志到剪贴板 (压缩后 65 条)
```

弹窗显示：
```
已复制日志到剪贴板！
原始: 480 条 → 压缩后: 65 条
可直接粘贴到 AI 对话框。
```

### 示例输出 2: 生成日报

```
[11:56:15] [INFO] 📊 开始生成日报... (原始: 480 条)
[11:56:15] [INFO] ━━━ 日志压缩统计 ━━━
[11:56:15] [INFO] 原始日志: 480 条
[11:56:15] [INFO] 过滤掉静止/无效: 320 条
[11:56:15] [INFO] 有效记录: 160 条
[11:56:15] [INFO] 合并后: 65 条
[11:56:15] [INFO] 压缩率: 13.5% (节省token约 86.5%)
[11:56:15] [INFO] ━━━━━━━━━━━━━━━━━━
[11:56:15] [INFO] 正在生成日报...
[11:56:18] [INFO] 日报已生成。
```

## 压缩统计说明

### 各项指标含义：

1. **原始日志**: 从JSONL文件读取的所有记录数
2. **过滤掉静止/无效**: 被过滤掉的记录数，包括：
   - "同上 (静止)" 
   - "API Key 缺失"
   - 分析失败的记录
   - 空记录
3. **有效记录**: 过滤后剩余的有效活动记录
4. **合并后**: 合并相似活动后的最终记录数
5. **压缩率**: 最终记录数占原始记录数的百分比
6. **节省token约**: 100% - 压缩率 = 实际节省的百分比

## 典型场景分析

### 场景1: 工作日全天监控
```
原始日志: 480 条 (8小时 × 60条/小时)
├─ 过滤掉静止: 250 条 (画面长时间不动，如午休、开会)
├─ 有效记录: 230 条 (实际有活动变化的)
└─ 合并后: 85 条 (连续相似活动被合并)

压缩率: 17.7%
Token节省: ~82%
```

### 场景2: 高强度编码
```
原始日志: 480 条
├─ 过滤掉静止: 100 条 (较少静止，一直在工作)
├─ 有效记录: 380 条
└─ 合并后: 120 条 (活动多样，合并较少)

压缩率: 25%
Token节省: ~75%
```

### 场景3: 摸鱼一天
```
原始日志: 480 条
├─ 过滤掉静止: 420 条 (大部分时间画面静止)
├─ 有效记录: 60 条
└─ 合并后: 35 条

压缩率: 7.3%
Token节省: ~93% 🎉
```

## 如何查看调试信息

1. **运行程序后**，在主界面的"运行日志"文本框中会实时显示
2. **每次压缩时**都会输出详细统计，用分隔线包围，便于查看
3. **复制或生成日报后**，在弹窗中也会显示压缩前后的对比

## 压缩逻辑验证

如果你想验证压缩效果，可以：

1. 勾选"显示详细调试信息"
2. 点击"复制日志+Prompt"
3. 查看运行日志中的压缩统计
4. 粘贴到文本编辑器，检查表格内容

压缩后的日志会显示时间段，例如：
```markdown
| 09:00:15 - 09:25:30 | VSCode | Code.exe | 编写Python代码 - 实现日志压缩功能 |
```

表示这段时间内的多条相似记录已被合并。

