# æ™ºèƒ½æ´»åŠ¨åˆå¹¶ç¤ºä¾‹

## ä¼˜åŒ–è¯´æ˜

å½“å¤šæ¡è¿ç»­çš„æ´»åŠ¨è¢«åˆ¤å®šä¸º"ç›¸ä¼¼"æ—¶ï¼Œä¸å†ç®€å•åœ°ä¿ç•™ç¬¬ä¸€æ¡è®°å½•ï¼Œè€Œæ˜¯**æ™ºèƒ½åˆå¹¶æ‰€æœ‰è¯¦ç»†ä¿¡æ¯**ã€‚

## åˆå¹¶ç®—æ³•

### æ­¥éª¤1: è¯†åˆ«å…±åŒå‰ç¼€
æ£€æŸ¥æ‰€æœ‰æ´»åŠ¨æè¿°æ˜¯å¦æœ‰å…±åŒçš„å‰ç¼€éƒ¨åˆ†ï¼ˆé€šè¿‡ ` - ` åˆ†éš”ï¼‰

### æ­¥éª¤2: æå–å·®å¼‚ä¿¡æ¯
ä»æ¯æ¡è®°å½•ä¸­æå–ä¸åŒçš„è¯¦ç»†éƒ¨åˆ†

### æ­¥éª¤3: å»é‡å¹¶è¿æ¥
ä½¿ç”¨åˆ†å·`; `è¿æ¥æ‰€æœ‰ä¸åŒçš„è¯¦ç»†ä¿¡æ¯

### æ­¥éª¤4: é‡æ–°ç»„åˆ
å…±åŒå‰ç¼€ + æ‰€æœ‰å·®å¼‚ä¿¡æ¯

## å®é™…ç¤ºä¾‹

### ç¤ºä¾‹ 1: ç¼–ç¨‹æ´»åŠ¨

**åŸå§‹è®°å½•** (3æ¡):
```markdown
| 09:00:15 | VSCode | Code.exe | ç¼–å†™Pythonä»£ç  - å®ç°æ—¥å¿—å‹ç¼©åŠŸèƒ½ |
| 09:01:20 | VSCode | Code.exe | ç¼–å†™Pythonä»£ç  - æ·»åŠ ç›¸ä¼¼åº¦åˆ¤æ–­ |
| 09:02:30 | VSCode | Code.exe | ç¼–å†™Pythonä»£ç  - æµ‹è¯•å‹ç¼©æ•ˆæœ |
```

**åˆå¹¶è¿‡ç¨‹**:
1. è¯†åˆ«å…±åŒå‰ç¼€: `ç¼–å†™Pythonä»£ç  - `
2. æå–å·®å¼‚:
   - `å®ç°æ—¥å¿—å‹ç¼©åŠŸèƒ½`
   - `æ·»åŠ ç›¸ä¼¼åº¦åˆ¤æ–­`
   - `æµ‹è¯•å‹ç¼©æ•ˆæœ`
3. åˆå¹¶ç»“æœ:

```markdown
| 09:00:15 - 09:02:30 | VSCode | Code.exe | ç¼–å†™Pythonä»£ç  - å®ç°æ—¥å¿—å‹ç¼©åŠŸèƒ½; æ·»åŠ ç›¸ä¼¼åº¦åˆ¤æ–­; æµ‹è¯•å‹ç¼©æ•ˆæœ |
```

âœ… **ä¿ç•™äº†æ‰€æœ‰è¯¦ç»†ä¿¡æ¯ï¼**

---

### ç¤ºä¾‹ 2: é˜…è¯»æ–‡æ¡£

**åŸå§‹è®°å½•** (4æ¡):
```markdown
| 10:15:00 | Chrome | chrome.exe | é˜…è¯»æ–‡æ¡£ - Pythonå­—ç¬¦ä¸²å¤„ç†æ–¹æ³• |
| 10:16:30 | Chrome | chrome.exe | é˜…è¯»æ–‡æ¡£ - æ­£åˆ™è¡¨è¾¾å¼è¯­æ³• |
| 10:18:00 | Chrome | chrome.exe | é˜…è¯»æ–‡æ¡£ - æ–‡ä»¶IOæ“ä½œç¤ºä¾‹ |
| 10:19:45 | Chrome | chrome.exe | é˜…è¯»æ–‡æ¡£ - å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ |
```

**åˆå¹¶ç»“æœ**:
```markdown
| 10:15:00 - 10:19:45 | Chrome | chrome.exe | é˜…è¯»æ–‡æ¡£ - Pythonå­—ç¬¦ä¸²å¤„ç†æ–¹æ³•; æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•; æ–‡ä»¶IOæ“ä½œç¤ºä¾‹; å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ |
```

---

### ç¤ºä¾‹ 3: è°ƒè¯•ä»£ç 

**åŸå§‹è®°å½•** (5æ¡):
```markdown
| 14:00:00 | VSCode | Code.exe | è°ƒè¯•ç¨‹åº - ä¿®å¤ç™»å½•æ¨¡å—bug |
| 14:02:15 | VSCode | Code.exe | è°ƒè¯•ç¨‹åº - æ£€æŸ¥æ•°æ®åº“è¿æ¥ |
| 14:03:40 | VSCode | Code.exe | è°ƒè¯•ç¨‹åº - ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½ |
| 14:05:20 | VSCode | Code.exe | è°ƒè¯•ç¨‹åº - æ·»åŠ é”™è¯¯æ—¥å¿— |
| 14:06:50 | VSCode | Code.exe | è°ƒè¯•ç¨‹åº - æµ‹è¯•ä¿®å¤æ•ˆæœ |
```

**åˆå¹¶ç»“æœ**:
```markdown
| 14:00:00 - 14:06:50 | VSCode | Code.exe | è°ƒè¯•ç¨‹åº - ä¿®å¤ç™»å½•æ¨¡å—bug; æ£€æŸ¥æ•°æ®åº“è¿æ¥; ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½; æ·»åŠ é”™è¯¯æ—¥å¿—; æµ‹è¯•ä¿®å¤æ•ˆæœ |
```

---

### ç¤ºä¾‹ 4: æ²¡æœ‰å…±åŒå‰ç¼€çš„æƒ…å†µ

**åŸå§‹è®°å½•**:
```markdown
| 15:00:00 | Terminal | cmd.exe | å®‰è£…Pythonä¾èµ–åŒ… |
| 15:01:30 | Terminal | cmd.exe | è¿è¡Œæµ‹è¯•ç”¨ä¾‹ |
| 15:02:45 | Terminal | cmd.exe | æŸ¥çœ‹Gitæäº¤å†å² |
```

**åˆå¹¶ç»“æœ**:
```markdown
| 15:00:00 - 15:02:45 | Terminal | cmd.exe | å®‰è£…Pythonä¾èµ–åŒ… - è¿è¡Œæµ‹è¯•ç”¨ä¾‹; æŸ¥çœ‹Gitæäº¤å†å² |
```
*ï¼ˆå–ç¬¬ä¸€æ¡çš„å‰ç¼€éƒ¨åˆ†ï¼Œåˆå¹¶åç»­çš„å·®å¼‚ï¼‰*

---

## å¯¹æ¯”ï¼šä¼˜åŒ–å‰ vs ä¼˜åŒ–å

### âŒ ä¼˜åŒ–å‰ï¼ˆåªä¿ç•™ç¬¬ä¸€æ¡ï¼‰
```markdown
| 09:00:15 - 09:02:30 | VSCode | Code.exe | ç¼–å†™Pythonä»£ç  - å®ç°æ—¥å¿—å‹ç¼©åŠŸèƒ½ |
```
**é—®é¢˜**: ä¸¢å¤±äº†"æ·»åŠ ç›¸ä¼¼åº¦åˆ¤æ–­"å’Œ"æµ‹è¯•å‹ç¼©æ•ˆæœ"çš„ä¿¡æ¯ âš ï¸

### âœ… ä¼˜åŒ–åï¼ˆæ™ºèƒ½åˆå¹¶ï¼‰
```markdown
| 09:00:15 - 09:02:30 | VSCode | Code.exe | ç¼–å†™Pythonä»£ç  - å®ç°æ—¥å¿—å‹ç¼©åŠŸèƒ½; æ·»åŠ ç›¸ä¼¼åº¦åˆ¤æ–­; æµ‹è¯•å‹ç¼©æ•ˆæœ |
```
**ä¼˜åŠ¿**: å®Œæ•´ä¿ç•™æ‰€æœ‰å·¥ä½œç»†èŠ‚ï¼ŒAIå¯ä»¥ç”Ÿæˆæ›´å‡†ç¡®çš„æ—¥æŠ¥ ğŸ¯

---

## æŠ€æœ¯å®ç°

### æ ¸å¿ƒå‡½æ•°: `_merge_activities(activities)`

```python
def _merge_activities(self, activities):
    """åˆå¹¶å¤šæ¡ç›¸ä¼¼æ´»åŠ¨çš„æè¿°,å»é™¤é‡å¤éƒ¨åˆ†,ä¿ç•™å·®å¼‚ä¿¡æ¯"""
    if len(activities) == 1:
        return activities[0]
    
    # æ‰¾å‡ºå…±åŒå‰ç¼€
    common_prefix = ""
    first_parts = activities[0].split(' - ', 1)
    if len(first_parts) > 1 and all(' - ' in act for act in activities):
        prefix_candidate = first_parts[0]
        if all(act.startswith(prefix_candidate) for act in activities):
            common_prefix = prefix_candidate + ' - '
    
    # æå–å·®å¼‚éƒ¨åˆ†
    details = []
    for act in activities:
        if common_prefix:
            detail = act[len(common_prefix):].strip()
        else:
            parts = act.split(' - ', 1)
            detail = parts[1] if len(parts) > 1 else act
        
        # å»é‡
        if detail and detail not in details:
            details.append(detail)
    
    # åˆå¹¶ç»“æœï¼ˆç”¨åˆ†å·è¿æ¥ï¼‰
    if common_prefix:
        return common_prefix + '; '.join(details)
    else:
        return activities[0].split(' - ')[0] + ' - ' + '; '.join(details)
```

---

## æ•ˆæœæ€»ç»“

âœ… **ä¿¡æ¯å®Œæ•´**: ä¸ä¼šä¸¢å¤±ä»»ä½•å·¥ä½œç»†èŠ‚  
âœ… **æ˜“è¯»æ€§å¥½**: ä½¿ç”¨åˆ†å·è¿æ¥ï¼Œæ¸…æ™°åˆ†éš”  
âœ… **èŠ‚çœtoken**: å»é™¤é‡å¤çš„å‰ç¼€éƒ¨åˆ†  
âœ… **æ™ºèƒ½åˆå¹¶**: è‡ªåŠ¨è¯†åˆ«å…±åŒæ¨¡å¼

**TokenèŠ‚çœå¯¹æ¯”**:
- ä¸åˆå¹¶: 150 tokens Ã— 3 = 450 tokens
- ç®€å•åˆå¹¶ï¼ˆåªä¿ç•™ç¬¬ä¸€æ¡ï¼‰: 150 tokens (ä¸¢å¤±ä¿¡æ¯)
- æ™ºèƒ½åˆå¹¶: 200 tokens (å®Œæ•´ + ç²¾ç®€) âœ…

**æœ€ä½³æ–¹æ¡ˆ**: æ™ºèƒ½åˆå¹¶æ—¢èŠ‚çœäº†tokenï¼Œåˆä¿ç•™äº†å®Œæ•´ä¿¡æ¯ï¼
